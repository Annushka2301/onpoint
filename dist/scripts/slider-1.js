let swipeStartTime,swipeEndTime,slider=document.querySelector(".slider"),sliderList=slider.querySelector(".slider__list"),sliderTrack=slider.querySelector(".slider__track"),slides=slider.querySelectorAll(".slider__slide"),home=document.querySelector(".header__btn"),next=slider.querySelector(".slide-1__btn"),slideWidth=slides[0].offsetWidth,slideIndex=0,posInit=0,posX1=0,posX2=0,posY1=0,posY2=0,posFinal=0,isSwipe=!1,isScroll=!1,allowSwipe=!0,transition=!0,nextTrf=0,prevTrf=0,lastTrf=--slides.length*slideWidth,posThreshold=.35*slides[0].offsetWidth,trfRegExp=/([-0-9.]+(?=px))/,animation=document.querySelectorAll(".slide-2__img");modal=document.querySelector(".modal"),getEvent=function(){return-1!==event.type.search("touch")?event.touches[0]:event},slide=function(){if(transition&&(sliderTrack.style.transition="transform .5s"),sliderTrack.style.transform=`translate3d(-${slideIndex*slideWidth}px, 0px, 0px)`,1===slideIndex)for(let e=0;e<animation.length;e++)animation[e].classList.add("appear");else for(let e=0;e<animation.length;e++)animation[e].classList.remove("appear");2!==slideIndex&&(modal.style="display: none")},swipeStart=function(){let e=getEvent();allowSwipe&&(swipeStartTime=Date.now(),transition=!0,nextTrf=(slideIndex+1)*-slideWidth,prevTrf=(slideIndex-1)*-slideWidth,posInit=posX1=e.clientX,posY1=e.clientY,sliderTrack.style.transition="",document.addEventListener("touchmove",swipeAction),document.addEventListener("mousemove",swipeAction),document.addEventListener("touchend",swipeEnd),document.addEventListener("mouseup",swipeEnd),sliderList.classList.remove("grab"),sliderList.classList.add("grabbing"))},swipeAction=function(){let e=getEvent(),s=+sliderTrack.style.transform.match(trfRegExp)[0];if(posX2=posX1-e.clientX,posX1=e.clientX,posY2=posY1-e.clientY,posY1=e.clientY,!isSwipe&&!isScroll){let e=Math.abs(posY2);e>7||0===posX2?(isScroll=!0,allowSwipe=!1):e<7&&(isSwipe=!0)}if(isSwipe){if(0===slideIndex){if(posInit<posX1)return void setTransform(s,0);allowSwipe=!0}if(slideIndex===--slides.length){if(posInit>posX1)return void setTransform(s,lastTrf);allowSwipe=!0}if(posInit>posX1&&s<nextTrf||posInit<posX1&&s>prevTrf)return void reachEdge();sliderTrack.style.transform=`translate3d(${s-posX2}px, 0px, 0px)`}},swipeEnd=function(){posFinal=posInit-posX1,isScroll=!1,isSwipe=!1,document.removeEventListener("touchmove",swipeAction),document.removeEventListener("mousemove",swipeAction),document.removeEventListener("touchend",swipeEnd),document.removeEventListener("mouseup",swipeEnd),sliderList.classList.add("grab"),sliderList.classList.remove("grabbing"),allowSwipe?(swipeEndTime=Date.now(),(Math.abs(posFinal)>posThreshold||swipeEndTime-swipeStartTime<300)&&(posInit<posX1?slideIndex--:posInit>posX1&&slideIndex++),posInit!==posX1?(allowSwipe=!1,slide()):allowSwipe=!0):allowSwipe=!0},setTransform=function(e,s){e>=s&&e>s&&(sliderTrack.style.transform=`translate3d(${s}px, 0px, 0px)`),allowSwipe=!1},reachEdge=function(){transition=!1,swipeEnd(),allowSwipe=!0},sliderTrack.style.transform="translate3d(0px, 0px, 0px)",sliderList.classList.add("grab"),sliderTrack.addEventListener("transitionend",(()=>allowSwipe=!0)),slider.addEventListener("touchstart",swipeStart),slider.addEventListener("mousedown",swipeStart),home.addEventListener("click",(function(){slideIndex=0,slide()})),next.addEventListener("click",(function(){slideIndex=1,slide()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci0xLmpzIl0sIm5hbWVzIjpbInN3aXBlU3RhcnRUaW1lIiwic3dpcGVFbmRUaW1lIiwic2xpZGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVyTGlzdCIsInNsaWRlclRyYWNrIiwic2xpZGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImhvbWUiLCJuZXh0Iiwic2xpZGVXaWR0aCIsIm9mZnNldFdpZHRoIiwic2xpZGVJbmRleCIsInBvc0luaXQiLCJwb3NYMSIsInBvc1gyIiwicG9zWTEiLCJwb3NZMiIsInBvc0ZpbmFsIiwiaXNTd2lwZSIsImlzU2Nyb2xsIiwiYWxsb3dTd2lwZSIsInRyYW5zaXRpb24iLCJuZXh0VHJmIiwicHJldlRyZiIsImxhc3RUcmYiLCJsZW5ndGgiLCJwb3NUaHJlc2hvbGQiLCJ0cmZSZWdFeHAiLCJhbmltYXRpb24iLCJtb2RhbCIsImdldEV2ZW50IiwiZXZlbnQiLCJ0eXBlIiwic2VhcmNoIiwidG91Y2hlcyIsInNsaWRlIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJpIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3dpcGVTdGFydCIsImV2dCIsIkRhdGUiLCJub3ciLCJjbGllbnRYIiwiY2xpZW50WSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzd2lwZUFjdGlvbiIsInN3aXBlRW5kIiwibWF0Y2giLCJwb3NZIiwiTWF0aCIsImFicyIsInNldFRyYW5zZm9ybSIsInJlYWNoRWRnZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb21hcHJlVHJhbnNmb3JtIl0sIm1hcHBpbmdzIjoiQUFBQSxJQXVCRUEsZUFDQUMsYUF4QkVDLE9BQVNDLFNBQVNDLGNBQWMsV0FDbENDLFdBQWFILE9BQU9FLGNBQWMsaUJBQ2xDRSxZQUFjSixPQUFPRSxjQUFjLGtCQUNuQ0csT0FBU0wsT0FBT00saUJBQWlCLGtCQUNqQ0MsS0FBT04sU0FBU0MsY0FBYyxnQkFDOUJNLEtBQU9SLE9BQU9FLGNBQWMsaUJBQzVCTyxXQUFh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ckIsWUFDRnJCLGFBQWU2QyxLQUFLQyxPQUNoQlEsS0FBS0MsSUFBSXJDLFVBQVlTLGNBQWdCM0IsYUFBZUQsZUFBaUIsT0FDbkVjLFFBQVVDLE1BQ1pGLGFBQ1NDLFFBQVVDLE9BQ25CRixjQU1BQyxVQUFZQyxPQUNkTyxZQUFhLEVBQ2JlLFNBRUFmLFlBQWEsR0FJZkEsWUFBYSxHQUlqQm1DLGFBQWUsU0FBU2xCLEVBQVdxQixHQUM3QnJCLEdBQWFxQixHQUNYckIsRUFBWXFCLElBQ2R0RCxZQUFZZ0MsTUFBTUMsVUFBWSxlQUFlcUIsa0JBR2pEdEMsWUFBYSxHQUVmb0MsVUFBWSxXQUNWbkMsWUFBYSxFQUNiNkIsV0FDQTlCLFlBQWEsR0FHakJoQixZQUFZZ0MsTUFBTUMsVUFBWSw2QkFDOUJsQyxXQUFXb0MsVUFBVUMsSUFBSSxRQUV6QnBDLFlBQVk0QyxpQkFBaUIsaUJBQWlCLElBQU01QixZQUFhLElBQ2pFcEIsT0FBT2dELGlCQUFpQixhQUFjTixZQUN0QzFDLE9BQU9nRCxpQkFBaUIsWUFBYU4sWUFFckNuQyxLQUFLeUMsaUJBQWlCLFNBQVMsV0FDN0JyQyxXQUFhLEVBQ2J3QixXQUdGM0IsS0FBS3dDLGlCQUFpQixTQUFTLFdBQzdCckMsV0FBYSxFQUNid0IiLCJmaWxlIjoic2xpZGVyLTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpLFxuICBzbGlkZXJMaXN0ID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2xpc3QnKSxcbiAgc2xpZGVyVHJhY2sgPSBzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fdHJhY2snKSxcbiAgc2xpZGVzID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX3NsaWRlJyksXG4gIGhvbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idG4nKSxcbiAgbmV4dCA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMV9fYnRuJyksXG4gIHNsaWRlV2lkdGggPSBzbGlkZXNbMF0ub2Zmc2V0V2lkdGgsXG4gIHNsaWRlSW5kZXggPSAwLFxuICBwb3NJbml0ID0gMCxcbiAgcG9zWDEgPSAwLFxuICBwb3NYMiA9IDAsXG4gIHBvc1kxID0gMCxcbiAgcG9zWTIgPSAwLFxuICBwb3NGaW5hbCA9IDAsXG4gIGlzU3dpcGUgPSBmYWxzZSxcbiAgaXNTY3JvbGwgPSBmYWxzZSxcbiAgYWxsb3dTd2lwZSA9IHRydWUsXG4gIHRyYW5zaXRpb24gPSB0cnVlLFxuICBuZXh0VHJmID0gMCxcbiAgcHJldlRyZiA9IDAsXG4gIGxhc3RUcmYgPSAtLXNsaWRlcy5sZW5ndGggKiBzbGlkZVdpZHRoLFxuICBwb3NUaHJlc2hvbGQgPSBzbGlkZXNbMF0ub2Zmc2V0V2lkdGggKiAwLjM1LFxuICB0cmZSZWdFeHAgPSAvKFstMC05Ll0rKD89cHgpKS8sXG4gIHN3aXBlU3RhcnRUaW1lLFxuICBzd2lwZUVuZFRpbWUsXG4gIGFuaW1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZS0yX19pbWcnKTtcbiAgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcbiAgZ2V0RXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKGV2ZW50LnR5cGUuc2VhcmNoKCd0b3VjaCcpICE9PSAtMSkgPyBldmVudC50b3VjaGVzWzBdIDogZXZlbnQ7XG4gIH0sXG4gIHNsaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgIHNsaWRlclRyYWNrLnN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtIC41cyc7XG4gICAgfVxuICAgIHNsaWRlclRyYWNrLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgtJHtzbGlkZUluZGV4ICogc2xpZGVXaWR0aH1weCwgMHB4LCAwcHgpYDtcblxuICAgIGlmIChzbGlkZUluZGV4ID09PSAxKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBhbmltYXRpb25baV0uY2xhc3NMaXN0LmFkZCgnYXBwZWFyJyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBhbmltYXRpb25baV0uY2xhc3NMaXN0LnJlbW92ZSgnYXBwZWFyJyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChzbGlkZUluZGV4ICE9PSAyKSBtb2RhbC5zdHlsZSA9ICdkaXNwbGF5OiBub25lJ1xuICAgIC8vIHByZXYuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnLCBzbGlkZUluZGV4ID09PSAwKTtcbiAgICAvLyBuZXh0LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJywgc2xpZGVJbmRleCA9PT0gLS1zbGlkZXMubGVuZ3RoKTtcbiAgfSxcbiAgc3dpcGVTdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBldnQgPSBnZXRFdmVudCgpO1xuXG4gICAgaWYgKGFsbG93U3dpcGUpIHtcblxuICAgICAgc3dpcGVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICB0cmFuc2l0aW9uID0gdHJ1ZTtcblxuICAgICAgbmV4dFRyZiA9IChzbGlkZUluZGV4ICsgMSkgKiAtc2xpZGVXaWR0aDtcbiAgICAgIHByZXZUcmYgPSAoc2xpZGVJbmRleCAtIDEpICogLXNsaWRlV2lkdGg7XG5cbiAgICAgIHBvc0luaXQgPSBwb3NYMSA9IGV2dC5jbGllbnRYO1xuICAgICAgcG9zWTEgPSBldnQuY2xpZW50WTtcblxuICAgICAgc2xpZGVyVHJhY2suc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBzd2lwZUFjdGlvbik7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzd2lwZUFjdGlvbik7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHN3aXBlRW5kKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzd2lwZUVuZCk7XG5cbiAgICAgIHNsaWRlckxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnZ3JhYicpO1xuICAgICAgc2xpZGVyTGlzdC5jbGFzc0xpc3QuYWRkKCdncmFiYmluZycpO1xuICAgIH1cbiAgfSxcbiAgc3dpcGVBY3Rpb24gPSBmdW5jdGlvbigpIHtcblxuICAgIGxldCBldnQgPSBnZXRFdmVudCgpLFxuICAgICAgc3R5bGUgPSBzbGlkZXJUcmFjay5zdHlsZS50cmFuc2Zvcm0sXG4gICAgICB0cmFuc2Zvcm0gPSArc3R5bGUubWF0Y2godHJmUmVnRXhwKVswXTtcblxuICAgIHBvc1gyID0gcG9zWDEgLSBldnQuY2xpZW50WDtcbiAgICBwb3NYMSA9IGV2dC5jbGllbnRYO1xuXG4gICAgcG9zWTIgPSBwb3NZMSAtIGV2dC5jbGllbnRZO1xuICAgIHBvc1kxID0gZXZ0LmNsaWVudFk7XG5cbiAgICBpZiAoIWlzU3dpcGUgJiYgIWlzU2Nyb2xsKSB7XG4gICAgICBsZXQgcG9zWSA9IE1hdGguYWJzKHBvc1kyKTtcbiAgICAgIGlmIChwb3NZID4gNyB8fCBwb3NYMiA9PT0gMCkge1xuICAgICAgICBpc1Njcm9sbCA9IHRydWU7XG4gICAgICAgIGFsbG93U3dpcGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAocG9zWSA8IDcpIHtcbiAgICAgICAgaXNTd2lwZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzU3dpcGUpIHtcbiAgICAgIGlmIChzbGlkZUluZGV4ID09PSAwKSB7XG4gICAgICAgIGlmIChwb3NJbml0IDwgcG9zWDEpIHtcbiAgICAgICAgICBzZXRUcmFuc2Zvcm0odHJhbnNmb3JtLCAwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxsb3dTd2lwZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNsaWRlSW5kZXggPT09IC0tc2xpZGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAocG9zSW5pdCA+IHBvc1gxKSB7XG4gICAgICAgICAgc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSwgbGFzdFRyZik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsbG93U3dpcGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwb3NJbml0ID4gcG9zWDEgJiYgdHJhbnNmb3JtIDwgbmV4dFRyZiB8fCBwb3NJbml0IDwgcG9zWDEgJiYgdHJhbnNmb3JtID4gcHJldlRyZikge1xuICAgICAgICByZWFjaEVkZ2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzbGlkZXJUcmFjay5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0cmFuc2Zvcm0gLSBwb3NYMn1weCwgMHB4LCAwcHgpYDtcbiAgICB9XG5cbiAgfSxcbiAgc3dpcGVFbmQgPSBmdW5jdGlvbigpIHtcbiAgICBwb3NGaW5hbCA9IHBvc0luaXQgLSBwb3NYMTtcblxuICAgIGlzU2Nyb2xsID0gZmFsc2U7XG4gICAgaXNTd2lwZSA9IGZhbHNlO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgc3dpcGVBY3Rpb24pO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHN3aXBlQWN0aW9uKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHN3aXBlRW5kKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgc3dpcGVFbmQpO1xuXG4gICAgc2xpZGVyTGlzdC5jbGFzc0xpc3QuYWRkKCdncmFiJyk7XG4gICAgc2xpZGVyTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdncmFiYmluZycpO1xuXG4gICAgaWYgKGFsbG93U3dpcGUpIHtcbiAgICAgIHN3aXBlRW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICBpZiAoTWF0aC5hYnMocG9zRmluYWwpID4gcG9zVGhyZXNob2xkIHx8IHN3aXBlRW5kVGltZSAtIHN3aXBlU3RhcnRUaW1lIDwgMzAwKSB7XG4gICAgICAgIGlmIChwb3NJbml0IDwgcG9zWDEpIHtcbiAgICAgICAgICBzbGlkZUluZGV4LS07XG4gICAgICAgIH0gZWxzZSBpZiAocG9zSW5pdCA+IHBvc1gxKSB7XG4gICAgICAgICAgc2xpZGVJbmRleCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIChzbGlkZUluZGV4ID09PSAxKVxuXG4gICAgICBpZiAocG9zSW5pdCAhPT0gcG9zWDEpIHtcbiAgICAgICAgYWxsb3dTd2lwZSA9IGZhbHNlO1xuICAgICAgICBzbGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxsb3dTd2lwZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgYWxsb3dTd2lwZSA9IHRydWU7XG4gICAgfVxuXG4gIH0sXG4gIHNldFRyYW5zZm9ybSA9IGZ1bmN0aW9uKHRyYW5zZm9ybSwgY29tYXByZVRyYW5zZm9ybSkge1xuICAgIGlmICh0cmFuc2Zvcm0gPj0gY29tYXByZVRyYW5zZm9ybSkge1xuICAgICAgaWYgKHRyYW5zZm9ybSA+IGNvbWFwcmVUcmFuc2Zvcm0pIHtcbiAgICAgICAgc2xpZGVyVHJhY2suc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7Y29tYXByZVRyYW5zZm9ybX1weCwgMHB4LCAwcHgpYDtcbiAgICAgIH1cbiAgICB9XG4gICAgYWxsb3dTd2lwZSA9IGZhbHNlO1xuICB9LFxuICByZWFjaEVkZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB0cmFuc2l0aW9uID0gZmFsc2U7XG4gICAgc3dpcGVFbmQoKTtcbiAgICBhbGxvd1N3aXBlID0gdHJ1ZTtcbiAgfTtcblxuc2xpZGVyVHJhY2suc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDBweCwgMHB4LCAwcHgpJztcbnNsaWRlckxpc3QuY2xhc3NMaXN0LmFkZCgnZ3JhYicpO1xuXG5zbGlkZXJUcmFjay5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4gYWxsb3dTd2lwZSA9IHRydWUpO1xuc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzd2lwZVN0YXJ0KTtcbnNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzd2lwZVN0YXJ0KTtcblxuaG9tZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICBzbGlkZUluZGV4ID0gMDtcbiAgc2xpZGUoKTtcbn0pO1xuXG5uZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gIHNsaWRlSW5kZXggPSAxO1xuICBzbGlkZSgpO1xufSlcblxuLy8gYXJyb3dzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4vLyAgIGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbi8vICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25leHQnKSkge1xuLy8gICAgIHNsaWRlSW5kZXgrKztcbi8vICAgfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmV2JykpIHtcbi8vICAgICBzbGlkZUluZGV4LS07XG4vLyAgIH0gZWxzZSB7XG4vLyAgICAgcmV0dXJuO1xuLy8gICB9XG5cbi8vICAgc2xpZGUoKTtcbi8vIH0pO1xuXG5cbi8vIGlmIChzbGlkZUluZGV4ID09PSAxKSB7XG4vLyAgIGNvbnNvbGUubG9nKHNsaWRlSW5kZXgpXG4vLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbWF0aW9uLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgYW5pbWF0aW9uW2ldLmNsYXNzTGlzdC5hZGQoJy5hcHBlYXInKTtcbi8vICAgfTtcbi8vIH0gZWxzZSB7XG4vLyAgIGNvbnNvbGUubG9nKHNsaWRlSW5kZXgpXG4vLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbWF0aW9uLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgYW5pbWF0aW9uW2ldLmNsYXNzTGlzdC5yZW1vdmUoJy5hcHBlYXInKTtcbi8vICAgfTtcbi8vIH1cblxuIl19
